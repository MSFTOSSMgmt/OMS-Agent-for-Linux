<source>
  type tail
  format /^(?<Time>[^\s]+)\s(?<severity>\w+)\s+(?<component>[^\s]+)\s+(?<command>\[\w+\])\s+(?<arguments>.+)$/
  path /var/log/mongodb/mongod.log
  pos_file /var/opt/microsoft/omsagent/state/var_mongod_log.pos
  tag oms.api.MongoDB
</source>

<filter oms.api.MongoDB>
  type filter_mongo_logs
</filter>

<match oms.api.MongoDB>
  type out_oms_api
  log_level info
  buffer_chunk_limit 5m
  buffer_type file
  buffer_path /var/opt/microsoft/omsagent/state/out_oms_api_mongo*.buffer
  buffer_queue_limit 10
  flush_interval 20s
  retry_limit 10
  retry_wait 5s
  max_retry_wait 5m
</match>


